<mat-card class="payment-container">
  <mat-card-header>
    <mat-card-title>Payment Method</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div
      class="payment-grid"
      fxLayout="row"
      fxLayoutGap="32px"
      fxLayout.lt-md="column"
      fxLayoutAlign="start stretch"
    >
      <section
        class="payment-input"
        fxFlex.xs="100%"
        fxFlex.sm="100%"
        fxFlex.md="50%"
        fxFlex.lg="50%"
        fxFlex.xl="50%"
      >
        <form [formGroup]="paymentElementForm">
          @if (elementsOptions.clientSecret) {
            <div class="stripe-wrapper mat-elevation-z2">
              <ngx-stripe-elements
                [stripe]="stripe"
                [elementsOptions]="elementsOptions"
              >
                <ngx-stripe-payment [options]="paymentElementOptions" />
              </ngx-stripe-elements>
            </div>
          }
        </form>
      </section>

      <section class="payment-summary mat-elevation-z1" fxFlex>
        <div class="order-summary-header">
          <h2 class="section-title">Order Summary</h2>
          <mat-icon matTooltip="View more">info</mat-icon>
        </div>

        @for (detail of orderDetails; track $index;) {
          <div class="summary-line">
            <span>{{ detail.label }}</span>
            <strong>{{ detail.value }}</strong>
          </div>
        }

        <mat-divider class="divider"></mat-divider>

        <div class="summary-line">
          <span><strong>You have to pay</strong></span>
        </div>

        <div class="summary-line total">
          <span><strong>{{ amount | number: '1.2-2' }}</strong> {{ currency }}</span>
          <mat-icon color="accent">receipt_long</mat-icon>
        </div>
      </section>
    </div>
  </mat-card-content>
  <mat-card-actions class="submit-section">
    <button
      mat-flat-button
      color="primary"
      class="submit-button"
      type="button"
      (click)="pay()"
      [disabled]="paying()"
    >
      <mat-icon>payment</mat-icon> Pay Now
    </button>
  </mat-card-actions>
</mat-card>
