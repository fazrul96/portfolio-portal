@if (allBillings.length > 0) {
  <mat-card class="history-card">
    <mat-accordion multi>
      @for (item of allBillings; track $index) {
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon class="category-icon" aria-hidden="true">
                {{ getCategoryIcon(item.name) }}
              </mat-icon>
              {{ item.name }}
            </mat-panel-title>
            <mat-panel-description>
              <span class="panel-info">
                RM{{ item.amount.toFixed(2) }} â€¢ {{ item.startDate | date:'mediumDate' }}
              </span>
              <span class="badge status {{ item.status.toLowerCase() }}">{{ item.status }}</span>
            </mat-panel-description>

          </mat-expansion-panel-header>

          <div class="invoice-body">
            <div class="invoice-section">
              <h4>Service Details</h4>
              <p><strong>Service:</strong> {{ item.name }}</p>
              <p><strong>Company:</strong> {{ item.company }}</p>
              <p><strong>Description:</strong> {{ item.description || 'N/A' }}</p>
            </div>

            <div class="invoice-section">
              <h4>Billing Info</h4>
              <p><strong>Amount:</strong> RM{{ item.amount.toFixed(2) }}</p>
              <p><strong>Status:</strong>
                <span class="badge status {{ item.status.toLowerCase() }}">{{ item.status }}</span>
              </p>
              <p><strong>Billing Date:</strong> {{ item.startDate | date:'mediumDate' }}</p>
            </div>
          </div>
        </mat-expansion-panel>
      }
    </mat-accordion>
  </mat-card>
} @else {
  <div class="empty-state">
    <mat-icon>receipt_long</mat-icon>
    <p>No billing history available</p>
  </div>
}
